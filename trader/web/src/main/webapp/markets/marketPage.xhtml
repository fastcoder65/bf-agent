<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<rich:panel bodyClass="inpanelBody">

		<f:facet name="header">
			<h:outputText value="All markets" />
		</f:facet>

		<h:panelGrid columns="1">

			<a4j:outputPanel id="marketsTreePane">

				<h:form>

					<rich:tree 	id="marketsRT" 
								toggleType="ajax" 
								var="nodeItem"
								toggleListener="#{marketBean.toggleListener}"
								selectionChangeListener="#{marketBean.selectionChanged}">

						<rich:treeModelRecursiveAdaptor id="sportItemsMA"
							roots="#{marketBean.sportNodes}"
							nodes="#{nodeItem.events}">

							<rich:treeNode id="sportItem"
								
								iconExpanded="images/tree/ftv2folderopen.gif"
								iconCollapsed="images/tree/ftv2folderclosed.gif">

								<h:outputText value="#{nodeItem.name}" />

							</rich:treeNode>

						<rich:treeModelAdaptor id="marketItems" nodes="#{nodeItem.markets}">

							<rich:treeNode id="marketItem"
								iconCollapsed="images/tree-help/ftv2doc.gif">

								<h:outputText value="#{nodeItem.name}" />

								<a4j:ajax event="dblclick"
									listener="#{marketBean.addToActiveMarkets}"
									render="marketRegion" />

							</rich:treeNode>

						</rich:treeModelAdaptor>

						</rich:treeModelRecursiveAdaptor>

					</rich:tree>
				</h:form>
			</a4j:outputPanel>
		</h:panelGrid>
	</rich:panel>
</ui:composition>



