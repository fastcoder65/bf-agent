<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
	<rich:panel bodyClass="inPanelBody">
		<f:facet name="header">
			<h:outputText value="All markets"/>
		</f:facet>

		<div>
			<h:form>
				<rich:tree toggleType="ajax" var="item"
						   nodeClass="net.bir.web.beans.treeModel.Entry"
						   toggleListener="#{marketBean.toggleListener}"
						   selectionChangeListener="#{marketBean.selectionChanged}"
						>

					<rich:treeModelRecursiveAdaptor roots="#{marketBean.rootNodes}" nodes="#{item.children}">
						<rich:treeNode>
							#{item.name}
						</rich:treeNode>


						<rich:treeModelAdaptor id="marketItems" nodes="#{item.markets}">
							<rich:treeNode id="marketItem" iconCollapsed="images/tree-help/ftv2doc.gif">
								#{item.name}
							<a4j:ajax event="dblclick" listener="#{marketBean.addToActiveMarkets}" render="marketRegion" />
							</rich:treeNode>
						</rich:treeModelAdaptor>


					</rich:treeModelRecursiveAdaptor>
				</rich:tree>
			</h:form>
		</div>
	</rich:panel>

</ui:composition>



