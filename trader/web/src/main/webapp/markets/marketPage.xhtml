<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
	<rich:panel bodyClass="inPanelBody">
		<f:facet name="header">
			<h:outputText value="All markets"/>
		</f:facet>

		<div>
			<h:form>
				<rich:tree toggleType="ajax" var="item"
						   nodeClass="net.bir.web.beans.treeModel.Entry"
						   toggleListener="#{marketBean.toggleListener}"
						   selectionChangeListener="#{marketBean.selectionChanged}"
						>

					<rich:treeModelRecursiveAdaptor roots="#{marketBean.rootNodes}" nodes="#{item.children}">
						<rich:treeNode  title="#{item.name} (#{item.type})"
										iconExpanded="images/tree-help/ftv2folderopen.gif"
										iconCollapsed="images/tree-help/ftv2folderclosed.gif"
								>#{item.name}</rich:treeNode>

						<rich:treeModelAdaptor rendered="#{item.marketNode}"  nodes="#{item.markets}">

							<rich:treeNode title="#{item.name} (#{item.market.description.marketTime})"
										   iconExpanded="images/tree-help/ftv2doc.gif"
										   iconCollapsed="images/tree-help/ftv2doc.gif"
									>#{item.name}<ui:remove>
								<a4j:ajax
										event="dblclick"
										onevent="#{marketBean.addToActiveMarkets}"
										render="marketRegion"/>
								</ui:remove>
							</rich:treeNode>

						</rich:treeModelAdaptor>
					</rich:treeModelRecursiveAdaptor>
				</rich:tree>
			</h:form>
		</div>
	</rich:panel>

</ui:composition>



